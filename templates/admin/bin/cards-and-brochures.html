{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<style>
    .cards-tool-layout {
        display: flex;
        gap: 24px;
    }

    .cards-tool-main {
        flex: 1;
        background: #f5f7fa;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    }

    .cards-tool-nav {
        display: inline-flex;
        gap: 8px;
        margin-bottom: 20px;
        background: #111827;
        border-radius: 999px;
        padding: 6px;
    }

    .cards-tool-nav button {
        border: none;
        background: transparent;
        color: #e5e7eb;
        font-size: 14px;
        font-weight: 600;
        padding: 8px 18px;
        border-radius: 999px;
        cursor: pointer;
        transition: background 0.2s ease, color 0.2s ease;
    }

    .cards-tool-nav button.is-active {
        background: #f59e0b;
        color: #111827;
    }

    .cards-tool-sections {
        display: grid;
    }

    .cards-tool-section {
        display: none;
        gap: 32px;
        align-items: stretch;
    }

    .cards-tool-section.is-visible {
        display: flex;
    }

    .cards-tool-form {
        flex: 1;
        background: #ffffff;
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(15, 23, 42, 0.06);
    }

    .cards-tool-form h2 {
        margin-top: 0;
        font-size: 18px;
        font-weight: 700;
        color: #111827;
    }

    .cards-tool-form label {
        display: block;
        margin-top: 14px;
        font-size: 13px;
        font-weight: 600;
        color: #4b5563;
    }

    .cards-tool-form input {
        margin-top: 6px;
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        font-size: 14px;
        color: #111827;
        background: #f9fafb;
    }

    .cards-tool-form input:focus {
        outline: none;
        border-color: #2563eb;
        background: #ffffff;
        box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
    }

    .cards-tool-preview {
        flex: 1.2;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .cards-tool-card {
        width: 360px;
        height: 210px;
        background: linear-gradient(135deg, #ffffff 75%, #fbbf24 100%);
        border-radius: 18px;
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.15);
        padding: 28px;
        display: grid;
        gap: 6px;
        font-family: 'Segoe UI', Arial, sans-serif;
    }

    .cards-tool-card-logo {
        width: 54px;
        height: 54px;
        border-radius: 50%;
        background: #f59e0b;
        color: #ffffff;
        display: grid;
        place-items: center;
        font-size: 22px;
        font-weight: 700;
        box-shadow: 0 6px 12px rgba(245, 158, 11, 0.45);
        margin-bottom: 6px;
    }

    .cards-tool-card-name {
        font-size: 20px;
        font-weight: 600;
        color: #111827;
    }

    .cards-tool-card-title {
        font-size: 14px;
        color: #6b7280;
    }

    .cards-tool-card-contact {
        font-size: 14px;
        color: #1f2937;
    }

    .cards-tool-placeholder {
        flex: 1;
        min-height: 220px;
        background: repeating-linear-gradient(45deg, #f3f4f6, #f3f4f6 10px, #ebecef 10px, #ebecef 20px);
        border-radius: 16px;
        color: #4b5563;
        display: grid;
        place-items: center;
        font-size: 16px;
        font-weight: 500;
        box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.08);
    }
</style>
{% endblock %}

{% block content %}
{% with
default_name=request.user.get_full_name|default:request.user.username|default:'Contactpersoon'
default_title=request.user.profile.job_title|default:'Eigenaar'
default_phone=SITE_SETTINGS_PHONE_DISPLAY
default_email=request.user.email|default:SITE_SETTINGS_EMAIL
default_company=SITE_SETTINGS_COMPANY
%}
<div class="cards-tool-layout">
    {% include "admin/sidebar.html" %}

    <div class="cards-tool-main">
        <div class="cards-tool-nav" role="tablist">
            <button id="cards-tool-tab-business" class="is-active" data-target="business">Business Card</button>
            <button id="cards-tool-tab-website" data-target="website">Website</button>
            <button id="cards-tool-tab-trifold" data-target="trifold">Trifold</button>
        </div>

        <div class="cards-tool-sections">
            <div id="cards-tool-section-business" class="cards-tool-section is-visible" role="tabpanel"
                aria-labelledby="cards-tool-tab-business">
                <form class="cards-tool-form" autocomplete="off" onsubmit="return false;">
                    <h2>Business Card Details</h2>
                    <label>Name
                        <input type="text" id="cards-input-name" placeholder="Jane Doe" value="{{ default_name }}">
                    </label>
                    <label>Title / Function
                        <input type="text" id="cards-input-title" placeholder="Web Developer"
                            value="{{ default_title }}">
                    </label>
                    <label>Phone
                        <input type="text" id="cards-input-phone" placeholder="+31 6 1234 5678"
                            value="{{ default_phone }}">
                    </label>
                    <label>Email
                        <input type="email" id="cards-input-email" placeholder="jane@email.com"
                            value="{{ default_email }}">
                    </label>
                    <label>Company Name
                        <input type="text" id="cards-input-company" placeholder="Just Code Works"
                            value="{{ default_company }}">
                    </label>
                </form>
                <div class="cards-tool-preview">
                    <div class="cards-tool-card" aria-live="polite">
                        <div class="cards-tool-card-logo" id="cards-logo">{{
                            default_company|default:"JC"|slice:":2"|upper }}</div>
                        <div class="cards-tool-card-name" id="cards-name">{{ default_name }}</div>
                        <div class="cards-tool-card-title" id="cards-title">{{ default_title }}</div>
                        <div class="cards-tool-card-contact" id="cards-company">{{ default_company }}</div>
                        <div class="cards-tool-card-contact" id="cards-phone">{{ default_phone }}</div>
                        <div class="cards-tool-card-contact" id="cards-email">{{ default_email }}</div>
                    </div>
                </div>
            </div>

            <div id="cards-tool-section-website" class="cards-tool-section" role="tabpanel"
                aria-labelledby="cards-tool-tab-website">
                <div class="cards-tool-form">
                    <h2>Website Preview Coming Soon!</h2>
                    <p>We are working on interactive previews for landing pages, one-pagers, and service brochures. Stay
                        tuned!</p>
                </div>
                <div class="cards-tool-preview">
                    <div class="cards-tool-placeholder">Website mock-up preview will appear here.</div>
                </div>
            </div>

            <div id="cards-tool-section-trifold" class="cards-tool-section" role="tabpanel"
                aria-labelledby="cards-tool-tab-trifold">
                <div class="cards-tool-form">
                    <h2>Trifold Preview Coming Soon!</h2>
                    <p>Upload copy and images to generate a live trifold brochure preview. This feature will be enabled
                        soon.</p>
                </div>
                <div class="cards-tool-preview">
                    <div class="cards-tool-placeholder">Trifold brochure preview will appear here.</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    (function () {
        var tabButtons = document.querySelectorAll('.cards-tool-nav button');
        var sections = {
            business: document.getElementById('cards-tool-section-business'),
            website: document.getElementById('cards-tool-section-website'),
            trifold: document.getElementById('cards-tool-section-trifold')
        };

        tabButtons.forEach(function (btn) {
            btn.addEventListener('click', function () {
                var target = btn.dataset.target;
                tabButtons.forEach(function (inner) {
                    inner.classList.toggle('is-active', inner === btn);
                });
                Object.keys(sections).forEach(function (key) {
                    sections[key].classList.toggle('is-visible', key === target);
                });
            });
        });

        var fields = {
            name: document.getElementById('cards-input-name'),
            title: document.getElementById('cards-input-title'),
            phone: document.getElementById('cards-input-phone'),
            email: document.getElementById('cards-input-email'),
            company: document.getElementById('cards-input-company')
        };

        var outputs = {
            name: document.getElementById('cards-name'),
            title: document.getElementById('cards-title'),
            phone: document.getElementById('cards-phone'),
            email: document.getElementById('cards-email'),
            company: document.getElementById('cards-company'),
            logo: document.getElementById('cards-logo')
        };

        function updateCardPreview() {
            outputs.name.textContent = fields.name.value;
            outputs.title.textContent = fields.title.value;
            outputs.phone.textContent = fields.phone.value;
            outputs.email.textContent = fields.email.value;
            outputs.company.textContent = fields.company.value;

            var initials = (fields.company.value || '')
                .split(' ')
                .filter(Boolean)
                .map(function (word) { return word.charAt(0).toUpperCase(); })
                .slice(0, 2)
                .join('');

            outputs.logo.textContent = initials || 'JC';
        }

        Object.values(fields).forEach(function (field) {
            field.addEventListener('input', updateCardPreview);
        });

        updateCardPreview();
    })();
</script>
{% endwith %}
{% endblock %}